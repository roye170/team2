<!DOCTYPE html>
<html lang="zh-hant">

<head>
	<!-- 854行改頭貼 -->
	<!-- 功能寫在908行  <div class="page-inner"></div>裡面 -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta charset="UTF-8">
	<title>Team2專業醫美</title>
	<meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
	<link rel="icon" href="imgs/number-2.png" type="image/x-icon" />

	<!-- Fonts and icons -->
	<!-- 這邊是我的fontawesome Kit -->
	<script src="https://kit.fontawesome.com/47b671abbd.js" crossorigin="anonymous"></script>
	<script src="assets/js/plugin/webfont/webfont.min.js"></script>
	<script>
		WebFont.load({
			google: { families: ["Public Sans:300,400,500,600,700"] },
			custom: {
				families: [
					"Font Awesome 5 Solid",
					"Font Awesome 5 Regular",
					"Font Awesome 5 Brands",
					"simple-line-icons",
				],
				urls: ["assets/css/fonts.min.css"],
			},
			active: function () {
				sessionStorage.fonts = true;
			},
		});
	</script>

	<!-- CSS Files -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
	<link rel="stylesheet" href="assets/css/plugins.min.css" />
	<link rel="stylesheet" href="assets/css/kaiadmin.min.css" />

	<!-- CSS Just for demo purpose, don't include it in your project -->
	<link rel="stylesheet" href="assets/css/demo.css" />
	<!-- CDNJS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
</head>

<body>
	<div class="wrapper">
		<!-- 功能列  42 - 517行-->
		<!-- Sidebar -->
		<div class="sidebar" data-background-color="dark">
			<div class="sidebar-logo">
			  <!-- Logo Header -->
			  <div class="logo-header" data-background-color="dark">
				<a href="Team2index.html" class="logo">
				  <!-- 原本的logo -->
				  <!-- src="assets/img/kaiadmin/logo_light.svg" -->
				  <img
					src="imgs/number-2.png"
					alt="navbar brand"
					class="navbar-brand"
					height="30"
				  />
				  <h3 style="color: white; margin-left: 10px; margin-top: 5px">
					Team 2
				  </h3>
				</a>
				<div class="nav-toggle">
				  <button class="btn btn-toggle toggle-sidebar">
					<i class="gg-menu-right"></i>
				  </button>
				  <button class="btn btn-toggle sidenav-toggler">
					<i class="gg-menu-left"></i>
				  </button>
				</div>
				<button class="topbar-toggler more">
				  <i class="gg-more-vertical-alt"></i>
				</button>
			  </div>
			  <!-- End Logo Header -->
			</div>
			<div class="sidebar-wrapper scrollbar scrollbar-inner">
			  <div class="sidebar-content">
				<ul class="nav nav-secondary">
				  <li class="nav-section">
					<span class="sidebar-mini-icon">
					  <i class="fa fa-ellipsis-h"></i>
					</span>
					<h4 class="text-section">功能列</h4>
				  </li>
				  <!-- 這邊開始下面是我們的功能 -->
	
				  <!-- 排班 -->
				  <li class="nav-item">
					<!-- 這個href 跟 下面collapse的id一樣，用來摺疊小功能列，bootstrap的功能 -->
					<!-- Function i 可以自己改名，下面id記得改 -->
					<a data-bs-toggle="collapse" href="#function1">
					  <!-- i這行可以自己換成想要的iccn -->
					  <i class="fa-solid fa-hippo"></i>
					  <p>假單</p>
					  <span class="caret"></span>
					</a>
					<div class="collapse" id="function1">
					  <ul class="nav nav-collapse">
						<li>
						  <!-- href裡面寫超連結到功能網頁 -->
						  <a href="/clinc/leaverecord.html">
							<span class="sub-item">假單總覽</span>
						  </a>
						  <!-- </li>
						<li><a href=""> <span class="sub-item">功能2</span>
						</a></li>
						<li><a href=""> <span class="sub-item">功能3</span>
						</a></li> -->
						</li>
					  </ul>
					</div>
				  </li>
				  <!-- 員工資訊 -->
				  <li class="nav-item">
					<!-- 這個href 跟 下面collapse的id一樣，用來摺疊小功能列，bootstrap的功能 -->
					<!-- Function i 可以自己改名，下面id記得改 -->
					<a data-bs-toggle="collapse" href="#function2">
					  <!-- i這行可以自己換成想要的iccn -->
					  <i class="fa-solid fa-user"></i>
					  <p>員工資訊</p>
					  <span class="caret"></span>
					</a>
					<div class="collapse" id="function2">
					  <ul class="nav nav-collapse">
						<li>
						  <!-- href裡面寫超連結到功能網頁 -->
						  <a href="/clinc/emp.html">
							<span class="sub-item">員工總覽</span>
						  </a>
						</li>
						<!-- <li><a href=""> <span class="sub-item">功能2</span>
						</a></li>
						<li><a href=""> <span class="sub-item">功能3</span>
						</a></li> -->
					  </ul>
					</div>
				  </li>
				  <!-- 門診預約 -->
				  <li class="nav-item">
					<!-- 這個href 跟 下面collapse的id一樣，用來摺疊小功能列，bootstrap的功能 -->
					<!-- Function i 可以自己改名，下面id記得改 -->
					<a data-bs-toggle="collapse" href="#function3">
					  <!-- i這行可以自己換成想要的iccn -->
					  <i class="fa-solid fa-phone"></i>
					  <p>門診預約</p>
					  <span class="caret"></span>
					</a>
					<div class="collapse" id="function3">
					  <ul class="nav nav-collapse">
						<li>
						  <!-- href裡面寫超連結到功能網頁 -->
						  <a href="./test2.html">
							<span class="sub-item">門診預約</span>
						  </a>
						</li>
						<!-- <li><a href=""> <span class="sub-item">功能2</span>
						</a></li>
						<li><a href=""> <span class="sub-item">功能3</span>
						</a></li> -->
					  </ul>
					</div>
				  </li>
				  <!-- 手術預約 -->
				  <li class="nav-item">
					<!-- 這個href 跟 下面collapse的id一樣，用來摺疊小功能列，bootstrap的功能 -->
					<!-- Function i 可以自己改名，下面id記得改 -->
					<a data-bs-toggle="collapse" href="#function4">
					  <!-- i這行可以自己換成想要的iccn -->
					  <i class="fa-solid fa-syringe"></i>
					  <p>手術預約</p>
					  <span class="caret"></span>
					</a>
					<div class="collapse" id="function4">
					  <ul class="nav nav-collapse">
						<li>
						  <!-- href裡面寫超連結到功能網頁 -->
						  <a href="/clinc/OpApp.html">
							<span class="sub-item">手術預約</span>
						  </a>
						</li>
						<!-- <li><a href=""> <span class="sub-item">功能2</span>
						</a></li>
						<li><a href=""> <span class="sub-item">功能3</span>
						</a></li> -->
					  </ul>
					</div>
				  </li>
				  <!-- 訂單 -->
				  <li class="nav-item">
					<!-- 這個href 跟 下面collapse的id一樣，用來摺疊小功能列，bootstrap的功能 -->
					<!-- Function i 可以自己改名，下面id記得改 -->
					<a data-bs-toggle="collapse" href="#function5">
					  <!-- i這行可以自己換成想要的iccn -->
					  <i class="fa-regular fa-note-sticky"></i>
					  <p>訂單</p>
					  <span class="caret"></span>
					</a>
					<div class="collapse" id="function5">
					  <ul class="nav nav-collapse">
						<li>
						  <!-- href裡面寫超連結到功能網頁 -->
						  <a href="/clinc/OrderView.html">
							<span class="sub-item">訂單總覽</span>
						  </a>
						</li>
						<!-- <li>
						  <a href="OrderAdd.html">
							<span class="sub-item">新增訂單</span>
						  </a>
						</li> -->
						<!-- <li><a href=""> <span class="sub-item">功能3</span>
						</a></li> -->
					  </ul>
					</div>
				  </li>
				  <!-- 庫存管理 -->
				  <li class="nav-item">
					<!-- 這個href 跟 下面collapse的id一樣，用來摺疊小功能列，bootstrap的功能 -->
					<!-- Function i 可以自己改名，下面id記得改 -->
					<a data-bs-toggle="collapse" href="#function6">
					  <!-- i這行可以自己換成想要的iccn -->
					  <i class="fas fa-layer-group"></i>
					  <p>庫存管理</p>
					  <span class="caret"></span>
					</a>
					<div class="collapse" id="function6">
					  <ul class="nav nav-collapse">
						<li>
						  <!-- href裡面寫超連結到功能網頁 -->
						  <a href="./test2.html">
							<span class="sub-item">庫存總覽</span>
						  </a>
						</li>
						<!-- <li><a href=""> <span class="sub-item">功能2</span>
						</a></li>
						<li><a href=""> <span class="sub-item">功能3</span>
						</a></li> -->
					  </ul>
					</div>
				  </li>
				</ul>
			  </div>
			</div>
		  </div>
		<!-- End Sidebar -->
		<!-- 功能列結束 -->
		<!-- 主頁面 -->
		<div class="main-panel">
			<!-- 上面的功能列 -->
			<div class="main-header">
				<div class="main-header-logo">
					<!-- Logo Header -->
					<div class="logo-header" data-background-color="dark">
						<a href="index.html" class="logo"> <img src="assets/img/kaiadmin/logo_light.svg"
								alt="navbar brand" class="navbar-brand" height="20" />
						</a>
						<div class="nav-toggle">
							<button class="btn btn-toggle toggle-sidebar">
								<i class="gg-menu-right"></i>
							</button>
							<button class="btn btn-toggle sidenav-toggler">
								<i class="gg-menu-left"></i>
							</button>
						</div>
						<button class="topbar-toggler more">
							<i class="gg-more-vertical-alt"></i>
						</button>
					</div>
					<!-- End Logo Header -->
				</div>
				<!-- Navbar Header -->
				<nav class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom">
					<div class="container-fluid">
						<nav
							class="navbar navbar-header-left navbar-expand-lg navbar-form nav-search p-0 d-none d-lg-flex">
							<div class="input-group">
								<div class="input-group-prepend">
									<button type="submit" class="btn btn-search pe-1">
										<i class="fa fa-search search-icon"></i>
									</button>
								</div>
								<input type="text" placeholder="Search ..." class="form-control" />
							</div>
						</nav>

						<ul class="navbar-nav topbar-nav ms-md-auto align-items-center">
							<li class="nav-item topbar-icon dropdown hidden-caret d-flex d-lg-none">
								<a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button"
									aria-expanded="false" aria-haspopup="true"> <i class="fa fa-search"></i>
								</a>
								<ul class="dropdown-menu dropdown-search animated fadeIn">
									<form class="navbar-left navbar-form nav-search">
										<div class="input-group">
											<input type="text" placeholder="Search ..." class="form-control" />
										</div>
									</form>
								</ul>
							</li>
							<li class="nav-item topbar-icon dropdown hidden-caret"><a class="nav-link dropdown-toggle"
									href="#" id="messageDropdown" role="button" data-bs-toggle="dropdown"
									aria-haspopup="true" aria-expanded="false"> <i class="fa fa-envelope"></i>
								</a>
								<ul class="dropdown-menu messages-notif-box animated fadeIn"
									aria-labelledby="messageDropdown">
									<li>
										<div class="dropdown-title d-flex justify-content-between align-items-center">
											Messages <a href="#" class="small">Mark all as read</a>
										</div>
									</li>
									<li>
										<div class="message-notif-scroll scrollbar-outer">
											<div class="notif-center">
												<a href="#">
													<div class="notif-img">
														<img src="assets/img/jm_denis.jpg" alt="Img Profile" />
													</div>
													<div class="notif-content">
														<span class="subject">Jimmy Denis</span> <span class="block">
															How are you ? </span> <span class="time">5
															minutes ago</span>
													</div>
												</a> <a href="#">
													<div class="notif-img">
														<img src="assets/img/chadengle.jpg" alt="Img Profile" />
													</div>
													<div class="notif-content">
														<span class="subject">Chad</span> <span class="block">
															Ok, Thanks ! </span> <span class="time">12 minutes
															ago</span>
													</div>
												</a> <a href="#">
													<div class="notif-img">
														<img src="assets/img/mlane.jpg" alt="Img Profile" />
													</div>
													<div class="notif-content">
														<span class="subject">Jhon Doe</span> <span class="block">
															Ready for the meeting today... </span> <span class="time">12
															minutes ago</span>
													</div>
												</a> <a href="#">
													<div class="notif-img">
														<img src="assets/img/talha.jpg" alt="Img Profile" />
													</div>
													<div class="notif-content">
														<span class="subject">Talha</span> <span class="block">
															Hi, Apa Kabar ? </span> <span class="time">17 minutes
															ago</span>
													</div>
												</a>
											</div>
										</div>
									</li>
									<li><a class="see-all" href="javascript:void(0);">See
											all messages<i class="fa fa-angle-right"></i>
										</a></li>
								</ul>
							</li>
							<li class="nav-item topbar-icon dropdown hidden-caret"><a class="nav-link dropdown-toggle"
									href="#" id="notifDropdown" role="button" data-bs-toggle="dropdown"
									aria-haspopup="true" aria-expanded="false"> <i class="fa fa-bell"></i> <span
										class="notification">4</span>
								</a>
								<ul class="dropdown-menu notif-box animated fadeIn" aria-labelledby="notifDropdown">
									<li>
										<div class="dropdown-title">You have 4 new notification
										</div>
									</li>
									<li>
										<div class="notif-scroll scrollbar-outer">
											<div class="notif-center">
												<a href="#">
													<div class="notif-icon notif-primary">
														<i class="fa fa-user-plus"></i>
													</div>
													<div class="notif-content">
														<span class="block"> New user registered </span> <span
															class="time">5 minutes ago</span>
													</div>
												</a> <a href="#">
													<div class="notif-icon notif-success">
														<i class="fa fa-comment"></i>
													</div>
													<div class="notif-content">
														<span class="block"> Rahmad commented on Admin </span> <span
															class="time">12 minutes ago</span>
													</div>
												</a> <a href="#">
													<div class="notif-img">
														<img src="assets/img/profile2.jpg" alt="Img Profile" />
													</div>
													<div class="notif-content">
														<span class="block"> Reza send messages to you </span> <span
															class="time">12 minutes ago</span>
													</div>
												</a> <a href="#">
													<div class="notif-icon notif-danger">
														<i class="fa fa-heart"></i>
													</div>
													<div class="notif-content">
														<span class="block"> Farrah liked Admin </span> <span
															class="time">17 minutes ago</span>
													</div>
												</a>
											</div>
										</div>
									</li>
									<li><a class="see-all" href="javascript:void(0);">See
											all notifications<i class="fa fa-angle-right"></i>
										</a></li>
								</ul>
							</li>
							<li class="nav-item topbar-icon dropdown hidden-caret"><a class="nav-link"
									data-bs-toggle="dropdown" href="#" aria-expanded="false"> <i
										class="fas fa-layer-group"></i>
								</a>
								<div class="dropdown-menu quick-actions animated fadeIn">
									<div class="quick-actions-header">
										<span class="title mb-1">Quick Actions</span> <span
											class="subtitle op-7">Shortcuts</span>
									</div>
									<div class="quick-actions-scroll scrollbar-outer">
										<div class="quick-actions-items">
											<div class="row m-0">
												<a class="col-6 col-md-4 p-0" href="#">
													<div class="quick-actions-item">
														<div class="avatar-item bg-danger rounded-circle">
															<i class="far fa-calendar-alt"></i>
														</div>
														<span class="text">Calendar</span>
													</div>
												</a> <a class="col-6 col-md-4 p-0" href="#">
													<div class="quick-actions-item">
														<div class="avatar-item bg-warning rounded-circle">
															<i class="fas fa-map"></i>
														</div>
														<span class="text">Maps</span>
													</div>
												</a> <a class="col-6 col-md-4 p-0" href="#">
													<div class="quick-actions-item">
														<div class="avatar-item bg-info rounded-circle">
															<i class="fas fa-file-excel"></i>
														</div>
														<span class="text">Reports</span>
													</div>
												</a> <a class="col-6 col-md-4 p-0" href="#">
													<div class="quick-actions-item">
														<div class="avatar-item bg-success rounded-circle">
															<i class="fas fa-envelope"></i>
														</div>
														<span class="text">Emails</span>
													</div>
												</a> <a class="col-6 col-md-4 p-0" href="#">
													<div class="quick-actions-item">
														<div class="avatar-item bg-primary rounded-circle">
															<i class="fas fa-file-invoice-dollar"></i>
														</div>
														<span class="text">Invoice</span>
													</div>
												</a> <a class="col-6 col-md-4 p-0" href="#">
													<div class="quick-actions-item">
														<div class="avatar-item bg-secondary rounded-circle">
															<i class="fas fa-credit-card"></i>
														</div>
														<span class="text">Payments</span>
													</div>
												</a>
											</div>
										</div>
									</div>
								</div>
							</li>

							<li class="nav-item topbar-user dropdown hidden-caret"><a
									class="dropdown-toggle profile-pic" data-bs-toggle="dropdown" href="#"
									aria-expanded="false">
									<div class="avatar-sm">
										<!-- 改頭貼 -->
										<img src="imgs/MR_SQL.png" alt="..." class="avatar-img rounded-circle" />
									</div> <span class="profile-username"> <span class="op-7">Hi,</span>
										<span class="fw-bold">MR_SQL</span>
									</span>
								</a>
								<ul class="dropdown-menu dropdown-user animated fadeIn">
									<div class="dropdown-user-scroll scrollbar-outer">
										<li>
											<div class="user-box">
												<div class="avatar-lg">
													<img src="assets/img/profile.jpg" alt="image profile"
														class="avatar-img rounded" />
												</div>
												<div class="u-text">
													<h4>Hizrian</h4>
													<p class="text-muted">hello@example.com</p>
													<a href="profile.html" class="btn btn-xs btn-secondary btn-sm">View
														Profile</a>
												</div>
											</div>
										</li>
										<li>
											<div class="dropdown-divider"></div> <a class="dropdown-item" href="#">My
												Profile</a> <a class="dropdown-item" href="#">My
												Balance</a> <a class="dropdown-item" href="#">Inbox</a>
											<div class="dropdown-divider"></div> <a class="dropdown-item"
												href="#">Account Setting</a>
											<div class="dropdown-divider"></div> <a class="dropdown-item"
												href="#">Logout</a>
										</li>
									</div>
								</ul>
							</li>
						</ul>
					</div>
				</nav>
				<!-- End Navbar -->
			</div>
			<!-- 主要功能寫的地方 -->
			<div class="container">
				<div class="page-inner">
					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header">
									<div class="d-flex align-items-center">
										<h4 class="card-title">手術預約管理系統</h4>
										<button class="btn btn-primary btn-round ms-auto" onclick="showCreateModal()">
											<i class="fa fa-plus"></i> 新增手術預約
										</button>
									</div>
								</div>
								<div class="card-body">
									<div id="searchSection">
										<input type="date" id="searchDate">
										<button onclick="searchByDate()" class="btn btn-info">查詢指定日期預約</button>
										<button onclick="listAllOpApps()" class="btn btn-secondary">列出所有預約</button>
									</div>

									<div class="table-responsive">
										<table id="opAppTable" class="display table table-striped table-hover">
											<thead>
												<tr>
													<th>預約編號</th>
													<th>病患姓名</th>
													<th>病患電話</th>
													<th>手術室</th>
													<th>預約日期</th>
													<th>開始時間</th>
													<th>結束時間</th>
													<th>執刀醫師</th>
													<th>是否到診</th>
													<th>操作</th>
												</tr>
											</thead>
											<tbody></tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Modal -->
	<!-- 編輯模態框 -->
	<div id="editModal" class="modal">
		<h2>編輯手術預約</h2>
		<form id="editForm" action="/clinc/UpdateOpapp" method="post">
			<input type="hidden" id="edit_paperno">
			<label>預約編號: <input name="paperno" type="number" id="create_paperno" required></label><br>
			<label>病患姓名: <input name="pt_name" type="text" id="create_ptname" required></label><br>
			<label>病患電話: <input name="pt_phone" type="tel" id="create_ptphone"></label><br>
			<label>手術室: <input name="room_name" type="text" id="create_roomname"></label><br>
			<label>預約日期: <input name="op_appdate" type="date" id="create_opappdate" required></label><br>
			<label>開始時間: <input name="begin_time" type="time" id="create_beginTime"></label><br>
			<label>結束時間: <input name="end_time" type="time" id="create_endTime"></label><br>
			<label>執刀醫師: <input name="empname" type="text" id="create_empname"></label><br>
			<label>是否到診: <input name="visit" type="number" id="create_visit"></label><br>
			<button type="submit" onclick="createOpApp()">儲存</button>
			<button type="button" onclick="$.modal.close()">取消</button>

		</form>
	</div>

	<!-- 新增模態框 -->
	<div id="createModal" class="modal">
		<h2>新增手術預約</h2>
		<form id="createForm" action="/clinc/CreateOpApp" method="get">
			<label>預約編號: <input name="paperno" type="number" id="create_paperno" required></label><br>
			<label>病患姓名: <input name="pt_name" type="text" id="create_ptname" required></label><br>
			<label>病患電話: <input name="pt_phone" type="tel" id="create_ptphone"></label><br>
			<label>手術室: <input name="room_name" type="text" id="create_roomname"></label><br>
			<label>預約日期: <input name="op_appdate" type="date" id="create_opappdate" required></label><br>
			<label>開始時間: <input name="begin_time" type="time" id="create_beginTime"></label><br>
			<label>結束時間: <input name="end_time" type="time" id="create_endTime"></label><br>
			<label>執刀醫師: <input name="empname" type="text" id="create_empname"></label><br>
			<label>是否到診: <input name="visit" type="number" id="create_visit"></label><br>
			<button type="submit" onclick="createOpApp()">儲存</button>
			<button type="button" onclick="$.modal.close()">取消</button>
		</form>
	</div>

	<div class="card-body">

		<div class="modal fade" id="addRowModal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header border-0">
						<h5 class="modal-title">
							<span class="fw-mediumbold"> New</span> <span class="fw-light"> Row </span>
						</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<p class="small">Create a new row using this form, make
							sure you fill them all</p>
						<form>
							<div class="row">
								<div class="col-sm-12">
									<div class="form-group form-group-default">
										<label>Name</label> <input id="addName" type="text" class="form-control"
											placeholder="fill name" />
									</div>
								</div>
								<div class="col-md-6 pe-0">
									<div class="form-group form-group-default">
										<label>Position</label> <input id="addPosition" type="text" class="form-control"
											placeholder="fill position" />
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group form-group-default">
										<label>Office</label> <input id="addOffice" type="text" class="form-control"
											placeholder="fill office" />
									</div>
								</div>
							</div>
						</form>
					</div>
					<div class="modal-footer border-0">
						<button type="button" id="addRowButton" class="btn btn-primary">
							Add</button>
						<button type="button" class="btn btn-danger" data-dismiss="modal">
							Close</button>
					</div>
				</div>
			</div>
		</div>


	</div>
	</div>
	</div>
	</div>

	</div>
	</div>
	</div>
	<!--   Core JS Files   -->
	<!-- <script src="assets/js/core/jquery-3.7.1.min.js"></script> -->
	<!-- <script src="assets/js/core/popper.min.js"></script> -->
		<script src="assets/js/core/bootstrap.min.js"></script>

	<!-- jQuery Scrollbar -->
	<script src="assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>

	<!-- Chart JS -->
	<script src="assets/js/plugin/chart.js/chart.min.js"></script>

	<!-- jQuery Sparkline -->
	<script src="assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js"></script>

	<!-- Chart Circle -->
	<script src="assets/js/plugin/chart-circle/circles.min.js"></script>

	<!-- Datatables -->
	<script src="assets/js/plugin/datatables/datatables.min.js"></script>

	<!-- Bootstrap Notify -->
	<script src="assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>

	<!-- jQuery Vector Maps -->
	<script src="assets/js/plugin/jsvectormap/jsvectormap.min.js"></script>
	<script src="assets/js/plugin/jsvectormap/world.js"></script>

	<!-- Sweet Alert -->
	<script src="assets/js/plugin/sweetalert/sweetalert.min.js"></script>

	<!-- Kaiadmin JS -->
	<scrip src="assets/js/kaiadmin.min.js">
		</script>
		<script>
			// 頁面載入時列出所有預約
			$(document).ready(function () {
				listAllOpApps();
			});

			// 列出所有預約
			function listAllOpApps() {
				$.ajax({
					url: '/clinc/ListAllOpApp',
					type: 'GET',
					dataType: 'json',
					success: function (data) {
						updateTable(data);
					},
					error: function (xhr, status, error) {
						alert('發生錯誤: ' + error);
					}
				});
			}

			// 根據日期查詢預約
			function searchByDate() {
				var searchDate = $('#searchDate').val();
				if (!searchDate) {
					alert('請選擇日期');
					return;
				}
				$.ajax({
					url: '/clinc/ReadOpApp',
					type: 'GET',
					data: { op_appdate: searchDate },
					dataType: 'json',
					success: function (data) {
						updateTable(data);
					},
					error: function (xhr, status, error) {
						alert('發生錯誤: ' + error);
					}
				});
			}

			// 更新表格內容
			function updateTable(data) {
				var tbody = $('#opAppTable tbody');
				tbody.empty();
				$.each(data, function (i, opApp) {
					var tr = $('<tr>');
					tr.append($('<td>').text(opApp.paperno));
					tr.append($('<td>').text(opApp.ptname));
					tr.append($('<td>').text(opApp.ptphone));
					tr.append($('<td>').text(opApp.roomname));
					tr.append($('<td>').text(opApp.opappdate));
					tr.append($('<td>').text(opApp.beginTime));
					tr.append($('<td>').text(opApp.endTime));
					tr.append($('<td>').text(opApp.empname));
					tr.append($('<td>').text(opApp.visit));
					tr.append($('<td>').html(
						'<button onclick="showEditModal(' + opApp.paperno + ')" >編輯</button>' +
						'<button onclick="deleteOpApp(' + opApp.paperno + ')">刪除</button>'
					));
					tbody.append(tr);
				});
			}

			// 顯示編輯模態框
			function showEditModal(paperno) {
				$('#editModal').modal("show");
			}
			/* function showEditModal(paperno) {
				$.ajax({
					url: '/GroupPorject/ReadOpApp',
					type: 'GET',
					data: { paperno: paperno },
					dataType: 'json',
					success: function(data) {
						if (data && data.length > 0) {
							var opApp = data[0];
							$('#edit_paperno').val(opApp.paperno);
							$('#edit_ptname').val(opApp.ptname);
							$('#edit_ptphone').val(opApp.ptphone);
							$('#edit_roomname').val(opApp.roomname);
							$('#edit_opappdate').val(opApp.opappdate.split('T')[0]); // 處理日期格式
							$('#edit_beginTime').val(opApp.beginTime);
							$('#edit_endTime').val(opApp.endTime);
							$('#edit_empname').val(opApp.empname);
							$('#edit_visit').val(opApp.visit);
							$('#editModal').modal();
						} else {
							alert('無法獲取預約資料');
						}
					},
					error: function(xhr, status, error) {
						console.error("錯誤詳情:", xhr.responseText);
						alert('發生錯誤: ' + error);
					}
				});
			} */
			// 更新預約
			/* function updateOpApp() {
				 var opApp = {
					 paperno: $('#edit_paperno').val(),
					 pt_name: $('#edit_ptname').val(),
					 pt_phone: $('#edit_ptphone').val(),
					 room_name: $('#edit_roomname').val(),
					 op_appdate: $('#edit_opappdate').val(),
					 begin_time: $('#edit_beginTime').val(),
					 end_time: $('#edit_endTime').val(),
					 empname: $('#edit_empname').val(),
					 visit: $('#edit_visit').val()
				 }
			 	
				 console.log("準備更新的資料:", opApp);
			 	
				 $.ajax({
					 url: '/clinc/UpdateOpapp',
					 type: 'POST',
					 data: JSON.stringify(opApp),
					 contentType: 'application/json',
					 dataType: 'text',
					 success: function(response) {
						 console.log("伺服器回應:", response);
						 alert(response);
						 $.modal.close();
						 listAllOpApps();
					 },
					 error: function(xhr, status, error) {
						 console.error("錯誤詳情:", xhr.responseText);
						 alert('發生錯誤: ' + error);
					 }
				 });
			 } */

			// 刪除預約
			function deleteOpApp(paperno) {
				if (confirm('確定要刪除這筆預約嗎？')) {
					$.ajax({
						url: '/clinc/DeleteOpApp',
						type: 'GET',
						data: { paperno: paperno },
						success: function (response) {
							alert(response);
							listAllOpApps();
						},
						error: function (xhr, status, error) {
							alert('發生錯誤: ' + error);
						}
					});
				}
			}

			// 顯示新增模態框
			function showCreateModal() {
				$('#createForm')[0].reset();
				$('#createModal').modal();
			}

			// 新增預約
			function createOpApp() {
				var opApp = {
					paperno: $('#create_paperno').val(),
					pt_name: $('#create_ptname').val(),
					pt_phone: $('#create_ptphone').val(),
					room_name: $('#create_roomname').val(),
					op_appdate: $('#create_opappdate').val(),
					begin_time: $('#create_beginTime').val(),
					end_time: $('#create_endTime').val(),
					empname: $('#create_empname').val(),
					visit: $('#create_visit').val()
				};

				console.log("準備發送的資料:", opApp);

				/* $.ajax({
					 url: '/clinc/CreateOpApp',
					 type: 'POST',
					 data: JSON.stringify(opApp),
					 contentType: 'application/json; charset=utf-8', // 設置內容類型為 JSON 並指定 UTF-8 字符集
					 dataType: 'text',
					 success: function(response) {
						 console.log("伺服器回應:", response);
						 alert(response);
						 $.modal.close();
						 listAllOpApps();
					 },
					 error: function(xhr, status, error) {
						 console.error("錯誤詳情:", xhr.responseText);
						 alert('發生錯誤: ' + error);
					 }
				 }); */
			}



		</script>
		<!-- 下面是會有它自己的搜尋功能 -->
		<!-- 但可能會有bug -->
		<!-- <script>
					$(document).ready(function () {
					$("#basic-datatables").DataTable({});
			
					$("#multi-filter-select").DataTable({
						pageLength: 5,
						initComplete: function () {
						this.api()
							.columns()
							.every(function () {
							var column = this;
							var select = $(
								'<select class="form-select"><option value=""></option></select>'
							)
								.appendTo($(column.footer()).empty())
								.on("change", function () {
								var val = $.fn.dataTable.util.escapeRegex($(this).val());
			
								column
									.search(val ? "^" + val + "$" : "", true, false)
									.draw();
								});
			
							column
								.data()
								.unique()
								.sort()
								.each(function (d, j) {
								select.append(
									'<option value="' + d + '">' + d + "</option>"
								);
								});
							});
						},
					});
			
					// Add Row
					$("#add-row").DataTable({
						pageLength: 5,
					});
			
					var action =
						'<td> <div class="form-button-action"> <button type="button" data-bs-toggle="tooltip" title="" class="btn btn-link btn-primary btn-lg" data-original-title="Edit Task"> <i class="fa fa-edit"></i> </button> <button type="button" data-bs-toggle="tooltip" title="" class="btn btn-link btn-danger" data-original-title="Remove"> <i class="fa fa-times"></i> </button> </div> </td>';
			
					$("#addRowButton").click(function () {
						$("#add-row")
						.dataTable()
						.fnAddData([
							$("#addName").val(),
							$("#addPosition").val(),
							$("#addOffice").val(),
							action,
						]);
						$("#addRowModal").modal("hide");
					});
					});
				</script>  -->
</body>

</html>